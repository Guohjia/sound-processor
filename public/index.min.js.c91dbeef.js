(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{tjUo:function(t,e,i){"use strict";function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return Math.pow(Math.E,-Math.pow(t-i,2)/(2*e*e))}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}i.r(e),i.d(e,"SoundProcessor",function(){return n});var n=function(){function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var e=t.filterParams,i=void 0===e?{}:e,r=t.sampleRate,n=t.fftSize,s=t.endFrequency,a=t.startFrequency,h=t.outBandsQty,o=t.tWeight,u=t.aWeight;if(!n||!r||!h)throw new Error("need fftSize, sampleRate and outBandsQty");this.sampleRate=r,this.fftSize=n,this.bandsQty=Math.floor(n/2),this.outBandsQty=h,this.bandwidth=r/n,this.startFrequency=a||0,this.endFrequency=s||r,this.tWeight=!!o,this.aWeight=void 0===u||!!u,this.filterParams={mu:0,sigma:i.sigma||1,filterRadius:Math.floor(i.radius||0)},this.aWeights=[],this.bands=[],this.gKernel=[],this.historyLimit=5,this.history=[],this.initWeights(),this.initBands(),this.initGaussKernel(),this.process=this.process.bind(this)}var t,e,i;return t=l,(e=[{key:"initWeights",value:function(){for(var t,e,i=this.bandwidth,r=this.bandsQty,n=this.aWeights,s=0;s<r;s++)n.push((void 0,1.2588966*14884e4*(e=(t=s*i)*t)*e/((e+424.36)*Math.sqrt((e+11599.29)*(e+544496.41))*(e+14884e4))))}},{key:"initBands",value:function(){var t=this.endFrequency,e=this.startFrequency,i=this.outBandsQty,r=this.bands,n=Math.log2(t/e)/i;n=Math.pow(2,n);for(var s={lowerFrequency:Math.max(e,0),upperFrequency:0},a=0;a<i;a++){var h=s.lowerFrequency*n;s.upperFrequency=Math.min(h,t),r.push({lowerFrequency:s.lowerFrequency,upperFrequency:s.upperFrequency}),s.lowerFrequency=h}}},{key:"initGaussKernel",value:function(){for(var t=this.filterParams,e=this.gKernel,i=t.mu,r=t.sigma,n=t.filterRadius,s=n,a=-s;a<1;a++)e.push(o(a,r,i));for(var h=s-1;-1<h;h--)e.push(e[h]);this.gKernelSum=e.reduce(function(t,e){return t+e}),this.filterRadius=n,console.log(e)}},{key:"filter",value:function(t){var e=this.gKernel,i=this.gKernelSum,r=this.filterRadius;if(r)for(var n=0;n<t.length;n++){for(var s=0,a=n-r;a<n+r;a++){s+=(void 0!==t[a]?t[a]:0)*e[a-n+r]}t[n]=s/i}}},{key:"aWeighting",value:function(t){for(var e=this.aWeights,i=0;i<t.length;i++)void 0!==e[i]&&(t[i]=t[i]*e[i])}},{key:"divide",value:function(t){for(var e=this.outBandsQty,i=this.bandwidth,r=this.bands,n=new Array(e),s=0;s<r.length;s++){for(var a=r[s],h=Math.floor(a.lowerFrequency/i),o=Math.min(Math.floor(a.upperFrequency/i),t.length-1),u=0,l=h;l<=o;l++)u+=t[l]*t[l];n[s]=Math.sqrt(u/(o+1-h))}return n}},{key:"timeWeighting",value:function(t){var e=this.history,i=this.historyLimit;if(e.length<5)e.push(t.slice(0));else{e.pop(),e.unshift(t.slice(0));for(var r=0;r<t.length;r++){for(var n=0,s=0;s<i;s++)n+=e[s][r]/i;t[r]=n}}}},{key:"process",value:function(t){return this.filterRadius&&this.filter(t),this.tWeight&&this.timeWeighting(t),this.aWeight&&this.aWeighting(t),this.divide(t)}}])&&r(t.prototype,e),i&&r(t,i),l}()}},[["tjUo",0]]]);